<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>คำอธิฐานบอกกับแซนต้า</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://www.gstatic.com/firebasejs/9.19.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.0/firebase-firestore.js"></script>
</head>
<body>

    <div id="snow"></div>

    <div class="container">
        <h1>ส่งคำอธิฐานของคุณกับแซนต้า!</h1>

        <div class="wish-form">
            <label for="name">ชื่อของคุณ:</label>
            <input type="text" id="name" placeholder="กรอกชื่อของคุณ">

            <label for="wish">คำอธิฐานของคุณ:</label>
            <textarea id="wish" rows="4" placeholder="เขียนคำอวยพรของคุณ"></textarea>

            <button id="submitWish">ส่งคำอธิฐาน</button>
        </div>

        <h2>คำอธิฐาน:</h2>
        <ul id="wishesList" class="wishes"></ul>
    </div>

    <script>
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_PROJECT_ID.appspot.com",
            messagingSenderId: "YOUR_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        function loadWishes() {
            db.collection("wishes").get().then((querySnapshot) => {
                querySnapshot.forEach((doc) => {
                    const wish = doc.data();
                    addWish(wish.name, wish.wish);
                });
            });
        }

        function addWish(name, wish) {
            const wishesList = document.getElementById('wishesList');
            const li = document.createElement('li');
            li.innerHTML = `<strong>${name}</strong>: ${wish}`;
            wishesList.appendChild(li);
        }

        function saveWish(name, wish) {
            db.collection("wishes").add({
                name: name,
                wish: wish
            })
            .then(() => {
                console.log("คำอธิฐานบันทึกแล้ว");
            })
            .catch((error) => {
                console.error("เกิดข้อผิดพลาดในการบันทึกคำอธิฐาน: ", error);
            });
        }

        document.getElementById('submitWish').addEventListener('click', () => {
            const name = document.getElementById('name').value;
            const wish = document.getElementById('wish').value;

            if (name && wish) {
                addWish(name, wish);
                saveWish(name, wish);
                document.getElementById('name').value = '';
                document.getElementById('wish').value = '';
            } else {
                alert('กรุณากรอกชื่อและคำอธิฐานของคุณ!');
            }
        });

        window.onload = loadWishes;
    </script>
</body>
</html>